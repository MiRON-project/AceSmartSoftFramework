<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>AceSmartSoft API Documentation: SmartACE::ServiceHandler Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AceSmartSoft API Documentation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="http://www.servicerobotik-ulm.de"><span>servicerobotik-ulm.de</span></a></li>
      <li><a href="index.html"><span>Introduction</span></a></li>
      <li><a href="namespaceSmartACE.html"><span>API&#160;Index</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceSmartACE.html">SmartACE</a></li><li class="navelem"><a class="el" href="classSmartACE_1_1ServiceHandler.html">ServiceHandler</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-types">Protected Types</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classSmartACE_1_1ServiceHandler-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">SmartACE::ServiceHandler Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;smartServiceHandler.hh&gt;</code></p>
<div class="dynheader">
Inheritance diagram for SmartACE::ServiceHandler:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classSmartACE_1_1ServiceHandler.png" usemap="#SmartACE::ServiceHandler_map" alt=""/>
  <map id="SmartACE::ServiceHandler_map" name="SmartACE::ServiceHandler_map">
<area href="classSmartACE_1_1EventClientServiceHandler.html" alt="SmartACE::EventClientServiceHandler" shape="rect" coords="403,112,796,136"/>
<area href="classSmartACE_1_1EventServerServiceHandler.html" alt="SmartACE::EventServerServiceHandler" shape="rect" coords="403,168,796,192"/>
<area href="classSmartACE_1_1NSProxy.html" alt="SmartACE::NSProxy" shape="rect" coords="403,224,796,248"/>
<area href="classSmartACE_1_1PushClientServiceHandler.html" alt="SmartACE::PushClientServiceHandler" shape="rect" coords="403,280,796,304"/>
<area href="classSmartACE_1_1PushServerServiceHandler.html" alt="SmartACE::PushServerServiceHandler" shape="rect" coords="403,336,796,360"/>
<area href="classSmartACE_1_1QueryClientServiceHandler.html" alt="SmartACE::QueryClientServiceHandler" shape="rect" coords="403,392,796,416"/>
<area href="classSmartACE_1_1QueryServerServiceHandler.html" alt="SmartACE::QueryServerServiceHandler" shape="rect" coords="403,448,796,472"/>
<area href="classSmartACE_1_1SendClientServiceHandler.html" alt="SmartACE::SendClientServiceHandler" shape="rect" coords="403,504,796,528"/>
<area href="classSmartACE_1_1SendServerServiceHandler.html" alt="SmartACE::SendServerServiceHandler" shape="rect" coords="403,560,796,584"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:adc2d85b25c4ec9559ab789634acdd1fe"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSmartACE_1_1ServiceHandler.html#adc2d85b25c4ec9559ab789634acdd1fe">ServiceHandler</a> (ACE_Reactor *reactor=ACE_Reactor::instance())</td></tr>
<tr class="memdesc:adc2d85b25c4ec9559ab789634acdd1fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor and destructor.  <a href="#adc2d85b25c4ec9559ab789634acdd1fe">More...</a><br /></td></tr>
<tr class="separator:adc2d85b25c4ec9559ab789634acdd1fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c373d7ec5be772616904f6859c9a3f2"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSmartACE_1_1ServiceHandler.html#a0c373d7ec5be772616904f6859c9a3f2">~ServiceHandler</a> ()</td></tr>
<tr class="separator:a0c373d7ec5be772616904f6859c9a3f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeca37742786a7691218b6cfc0ca806c"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSmartACE_1_1ServiceHandler.html#afeca37742786a7691218b6cfc0ca806c">open</a> (void *handler=0)</td></tr>
<tr class="memdesc:afeca37742786a7691218b6cfc0ca806c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialization to create and activate an instance of this ACE_Svc_Handler class.  <a href="#afeca37742786a7691218b6cfc0ca806c">More...</a><br /></td></tr>
<tr class="separator:afeca37742786a7691218b6cfc0ca806c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c4162be04defc81f3c3eeec522b2ca1"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSmartACE_1_1ServiceHandler.html#a7c4162be04defc81f3c3eeec522b2ca1">handle_input</a> (ACE_HANDLE fd=ACE_INVALID_HANDLE)</td></tr>
<tr class="memdesc:a7c4162be04defc81f3c3eeec522b2ca1"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the main input-handler function that is called by the reactor to handle incoming data streams.  <a href="#a7c4162be04defc81f3c3eeec522b2ca1">More...</a><br /></td></tr>
<tr class="separator:a7c4162be04defc81f3c3eeec522b2ca1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a250fdfb7199f32780bf3651f196f4725"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSmartACE_1_1ServiceHandler.html#a250fdfb7199f32780bf3651f196f4725">handle_close</a> (ACE_HANDLE handle, ACE_Reactor_Mask close_mask)</td></tr>
<tr class="memdesc:a250fdfb7199f32780bf3651f196f4725"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hook handler method to handle closing connection.  <a href="#a250fdfb7199f32780bf3651f196f4725">More...</a><br /></td></tr>
<tr class="separator:a250fdfb7199f32780bf3651f196f4725"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acaf877904e63e4b598639d82ba4c3276"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSmartACE_1_1ServiceHandler.html#acaf877904e63e4b598639d82ba4c3276">send_command_message</a> (ACE_CDR::Long commandId, const ACE_Message_Block *further_comands=NULL, const ACE_Message_Block *message=NULL)</td></tr>
<tr class="memdesc:acaf877904e63e4b598639d82ba4c3276"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method encapsulates the message sending behavior.  <a href="#acaf877904e63e4b598639d82ba4c3276">More...</a><br /></td></tr>
<tr class="separator:acaf877904e63e4b598639d82ba4c3276"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdeb9dc1509acae637f00cd18f81c3b6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSmartACE_1_1ServiceHandler.html#acdeb9dc1509acae637f00cd18f81c3b6">trigger_shutdown</a> ()</td></tr>
<tr class="memdesc:acdeb9dc1509acae637f00cd18f81c3b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Trigger the shutdown procedure to be executed by the reactor.  <a href="#acdeb9dc1509acae637f00cd18f81c3b6">More...</a><br /></td></tr>
<tr class="separator:acdeb9dc1509acae637f00cd18f81c3b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdb5d70d531b8146cb0edcf272c12708"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSmartACE_1_1ServiceHandler.html#acdb5d70d531b8146cb0edcf272c12708">is_disconnected</a> () const </td></tr>
<tr class="memdesc:acdb5d70d531b8146cb0edcf272c12708"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method returns true if reactor has closed the connection (due to e.g.  <a href="#acdb5d70d531b8146cb0edcf272c12708">More...</a><br /></td></tr>
<tr class="separator:acdb5d70d531b8146cb0edcf272c12708"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-types"></a>
Protected Types</h2></td></tr>
<tr class="memitem:ae70ae1b0a8b691945d42e279a215b1a7"><td class="memItemLeft" align="right" valign="top">typedef ACE_Svc_Handler&lt; ACE_SOCK_STREAM, ACE_NULL_SYNCH &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSmartACE_1_1ServiceHandler.html#ae70ae1b0a8b691945d42e279a215b1a7">super</a></td></tr>
<tr class="memdesc:ae70ae1b0a8b691945d42e279a215b1a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Definition for parent class.  <a href="#ae70ae1b0a8b691945d42e279a215b1a7">More...</a><br /></td></tr>
<tr class="separator:ae70ae1b0a8b691945d42e279a215b1a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a48bbd0c3748f7071967e9889fbc97044"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSmartACE_1_1ServiceHandler.html#a48bbd0c3748f7071967e9889fbc97044">handle_incomming_message</a> (ACE_CDR::Long command, ACE_InputCDR &amp;cmd_is, ACE_InputCDR &amp;msg_is)=0</td></tr>
<tr class="memdesc:a48bbd0c3748f7071967e9889fbc97044"><td class="mdescLeft">&#160;</td><td class="mdescRight">This handler should be implemented in derived classes.  <a href="#a48bbd0c3748f7071967e9889fbc97044">More...</a><br /></td></tr>
<tr class="separator:a48bbd0c3748f7071967e9889fbc97044"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab51e6a9eb25835394c937967b5066687"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSmartACE_1_1ServiceHandler.html#ab51e6a9eb25835394c937967b5066687">handle_exception</a> (ACE_HANDLE fd=ACE_INVALID_HANDLE)</td></tr>
<tr class="memdesc:ab51e6a9eb25835394c937967b5066687"><td class="mdescLeft">&#160;</td><td class="mdescRight">This callback handler is indirectly triggered (using the reactor's notify mechanism) from the method <a class="el" href="classSmartACE_1_1ServiceHandler.html#acdeb9dc1509acae637f00cd18f81c3b6" title="Trigger the shutdown procedure to be executed by the reactor. ">trigger_shutdown()</a> which can be used by external threads.  <a href="#ab51e6a9eb25835394c937967b5066687">More...</a><br /></td></tr>
<tr class="separator:ab51e6a9eb25835394c937967b5066687"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bb3f37121e95a072af351358e1f078b"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSmartACE_1_1ServiceHandler.html#a4bb3f37121e95a072af351358e1f078b">destroy</a> (void)</td></tr>
<tr class="memdesc:a4bb3f37121e95a072af351358e1f078b"><td class="mdescLeft">&#160;</td><td class="mdescRight">This class is overloaded from base class to change visibility (in order to prevent the destruction from external threads).  <a href="#a4bb3f37121e95a072af351358e1f078b">More...</a><br /></td></tr>
<tr class="separator:a4bb3f37121e95a072af351358e1f078b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:aff3e007ef4adf668cf43ac80db35d0ee"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSmartACE_1_1ServiceHandler.html#aff3e007ef4adf668cf43ac80db35d0ee">connectionClosedByUser</a></td></tr>
<tr class="memdesc:aff3e007ef4adf668cf43ac80db35d0ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">This internal variable is used to distinguish whether a connection is closed actively by an external thread (using the method <a class="el" href="classSmartACE_1_1ServiceHandler.html#acdeb9dc1509acae637f00cd18f81c3b6" title="Trigger the shutdown procedure to be executed by the reactor. ">trigger_shutdown()</a> ) or the connection is closed because the underlying socket is broken.  <a href="#aff3e007ef4adf668cf43ac80db35d0ee">More...</a><br /></td></tr>
<tr class="separator:aff3e007ef4adf668cf43ac80db35d0ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a017c8221100a55fff5f21bda879336a8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSmartACE_1_1ServiceHandler.html#a017c8221100a55fff5f21bda879336a8">connectionResetByReactor</a></td></tr>
<tr class="memdesc:a017c8221100a55fff5f21bda879336a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">This internal variable indicates that a connection was closed by reactor e.g.  <a href="#a017c8221100a55fff5f21bda879336a8">More...</a><br /></td></tr>
<tr class="separator:a017c8221100a55fff5f21bda879336a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>ACE <a class="el" href="classSmartACE_1_1ServiceHandler.html">ServiceHandler</a> Abstract base class</p>
<p>This class implements a bidirectional communication mechanism that allows to communicate between two end-points in a network (using in this case the SOCK_STREAM). In SmartSoft this class is used in all Server communication ports together with the ACE_Acceptor class and in all Client communication ports together with the ACE_Connector class.</p>
<p>Since 2013, this class additionally implements a more robust error handling mechanism, which directly deals with the broken pipe error inside of the communication methods. It is important to know that therefore, on Unix systems the broken pipe error should be deactivated (redirected to a no-op handler), because the default handling results in closing down the whole process (which is not nice the smartsoft case).</p>
<p>Also an adjusted clean-up procedure is implemented which decouples the destruction called from an external thread to be executed by the reactor itself. This is needed since otherwise a thread could destroy this class while the reactor still uses it, which in some cases leads to unexpected behavior. </p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="ae70ae1b0a8b691945d42e279a215b1a7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef ACE_Svc_Handler&lt;ACE_SOCK_STREAM, ACE_NULL_SYNCH&gt; <a class="el" href="classSmartACE_1_1ServiceHandler.html#ae70ae1b0a8b691945d42e279a215b1a7">SmartACE::ServiceHandler::super</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition for parent class. </p>
<p>This allows to use functions from parent class in a more readable way. </p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="adc2d85b25c4ec9559ab789634acdd1fe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SmartACE::ServiceHandler::ServiceHandler </td>
          <td>(</td>
          <td class="paramtype">ACE_Reactor *&#160;</td>
          <td class="paramname"><em>reactor</em> = <code>ACE_Reactor::instance()</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default constructor and destructor. </p>

</div>
</div>
<a class="anchor" id="a0c373d7ec5be772616904f6859c9a3f2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual SmartACE::ServiceHandler::~ServiceHandler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a4bb3f37121e95a072af351358e1f078b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void SmartACE::ServiceHandler::destroy </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This class is overloaded from base class to change visibility (in order to prevent the destruction from external threads). </p>

</div>
</div>
<a class="anchor" id="a250fdfb7199f32780bf3651f196f4725"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual int SmartACE::ServiceHandler::handle_close </td>
          <td>(</td>
          <td class="paramtype">ACE_HANDLE&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ACE_Reactor_Mask&#160;</td>
          <td class="paramname"><em>close_mask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Hook handler method to handle closing connection. </p>
<p>This default behavior is changed here. This method should not destroy the object itself (as implemented by default). Instead, the destruction is explicitly triggered by the user method triggerShutdown(). </p>

</div>
</div>
<a class="anchor" id="ab51e6a9eb25835394c937967b5066687"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual int SmartACE::ServiceHandler::handle_exception </td>
          <td>(</td>
          <td class="paramtype">ACE_HANDLE&#160;</td>
          <td class="paramname"><em>fd</em> = <code>ACE_INVALID_HANDLE</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This callback handler is indirectly triggered (using the reactor's notify mechanism) from the method <a class="el" href="classSmartACE_1_1ServiceHandler.html#acdeb9dc1509acae637f00cd18f81c3b6" title="Trigger the shutdown procedure to be executed by the reactor. ">trigger_shutdown()</a> which can be used by external threads. </p>

</div>
</div>
<a class="anchor" id="a48bbd0c3748f7071967e9889fbc97044"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual int SmartACE::ServiceHandler::handle_incomming_message </td>
          <td>(</td>
          <td class="paramtype">ACE_CDR::Long&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ACE_InputCDR &amp;&#160;</td>
          <td class="paramname"><em>cmd_is</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ACE_InputCDR &amp;&#160;</td>
          <td class="paramname"><em>msg_is</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This handler should be implemented in derived classes. </p>
<p>It should implement the dispatching of the incoming requests to the corresponding call-back methods (from the communication pattern). </p>

<p>Implemented in <a class="el" href="classSmartACE_1_1NSProxy.html#a015d5e6872fd25cc64c140cbfc547200">SmartACE::NSProxy</a>.</p>

</div>
</div>
<a class="anchor" id="a7c4162be04defc81f3c3eeec522b2ca1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual int SmartACE::ServiceHandler::handle_input </td>
          <td>(</td>
          <td class="paramtype">ACE_HANDLE&#160;</td>
          <td class="paramname"><em>fd</em> = <code>ACE_INVALID_HANDLE</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This is the main input-handler function that is called by the reactor to handle incoming data streams. </p>
<p>Within this function the de-marshaling takes place. </p>

</div>
</div>
<a class="anchor" id="acdb5d70d531b8146cb0edcf272c12708"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SmartACE::ServiceHandler::is_disconnected </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method returns true if reactor has closed the connection (due to e.g. </p>
<p>a broken pipe or remotely called shutdown) </p>

</div>
</div>
<a class="anchor" id="afeca37742786a7691218b6cfc0ca806c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual int SmartACE::ServiceHandler::open </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>handler</em> = <code>0</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialization to create and activate an instance of this ACE_Svc_Handler class. </p>
<p>Here, memory allocation and ACE_Svc_Handler parameterization takes place. The default implementation just calls the same method from parent class.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handler</td><td>A pointer to the parent controlling class (in this case ACE_Connector or ACE_Acceptor)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>error-code<ul>
<li>A "-1" determines an error</li>
<li>A "0" is returned if all goes right </li>
</ul>
</dd></dl>

<p>Reimplemented in <a class="el" href="classSmartACE_1_1QueryServerServiceHandler.html#a2049ac4f771b3e00409aa69828b0f2c0">SmartACE::QueryServerServiceHandler</a>, <a class="el" href="classSmartACE_1_1EventServerServiceHandler.html#a35a17af9e6476a5826850578f4608379">SmartACE::EventServerServiceHandler</a>, <a class="el" href="classSmartACE_1_1SendServerServiceHandler.html#af2ce34fa540e7a9265bef38b7895085e">SmartACE::SendServerServiceHandler</a>, <a class="el" href="classSmartACE_1_1NSProxy.html#a1ea4a75019da2893a99ceb276fa5661a">SmartACE::NSProxy</a>, and <a class="el" href="classSmartACE_1_1PushServerServiceHandler.html#ad6a8a9f7fd5222b1a6bee707dc1119ad">SmartACE::PushServerServiceHandler</a>.</p>

</div>
</div>
<a class="anchor" id="acaf877904e63e4b598639d82ba4c3276"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual int SmartACE::ServiceHandler::send_command_message </td>
          <td>(</td>
          <td class="paramtype">ACE_CDR::Long&#160;</td>
          <td class="paramname"><em>commandId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ACE_Message_Block *&#160;</td>
          <td class="paramname"><em>further_comands</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ACE_Message_Block *&#160;</td>
          <td class="paramname"><em>message</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method encapsulates the message sending behavior. </p>
<p>Within this method the marshaling takes place. It is safe to call this method from a user thread, however, this method is not thread safe and can not be called by several threads in parallel. It returns 0 on success or -1 on communication error. </p>

</div>
</div>
<a class="anchor" id="acdeb9dc1509acae637f00cd18f81c3b6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SmartACE::ServiceHandler::trigger_shutdown </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Trigger the shutdown procedure to be executed by the reactor. </p>
<p>The shutdown procedure should not be triggered by external threads directly. Instead the reactor should be notified to shutdown this service handler as soon as possible. This prevents the error, which can occur if a thread removes the service handler while it is still used by the reactor for still pending events. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="aff3e007ef4adf668cf43ac80db35d0ee"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SmartACE::ServiceHandler::connectionClosedByUser</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This internal variable is used to distinguish whether a connection is closed actively by an external thread (using the method <a class="el" href="classSmartACE_1_1ServiceHandler.html#acdeb9dc1509acae637f00cd18f81c3b6" title="Trigger the shutdown procedure to be executed by the reactor. ">trigger_shutdown()</a> ) or the connection is closed because the underlying socket is broken. </p>

</div>
</div>
<a class="anchor" id="a017c8221100a55fff5f21bda879336a8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SmartACE::ServiceHandler::connectionResetByReactor</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This internal variable indicates that a connection was closed by reactor e.g. </p>
<p>due to broken pipe or if the remote end-point calls shutdown (this variable prevents the service handler to run into broken pipe error in regular cases, however, as broken pipe is also handled inside of the receive/send methods, this functionality is not critical, it just improves the overall performance) </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>smartServiceHandler.hh</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
